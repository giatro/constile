<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="it">
<head>
<title>.ConStile | DHTML | Menu ad albero in JS/CSS</title>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
<meta name="description" content="Una guida dedicata all'uso dei fogli di stile a cascata (cascade style sheets - CSS) per lo sviluppo di siti web leggeri, usabili, conformi agli standard W3C." />
<meta name="keywords" content="CSS, fogli di stile, HTML, XHTML, layout, template, guide, tutorial, suggerimenti, tips, codice, open content" />
<meta http-equiv="revisit-after" content="15 days" />
<meta http-equiv="imagetoolbar" content="false" />
<meta name="MSSmartTagsPreventParsing" content="true" />
<!-- ий -->
<link rel="top" href="../../index.html" title="Homepage" />
<link rel="search" href="../../ricerca.php" title="Cerca nell'archivio di .ConStile" />
<link rel="author" href="../../informazioni.php#autore" title="Informazioni sull'autore di .ConStile" />
<link rel="copyright" href="../../informazioni.php#legali" title="Informazioni legali" />
<link rel="blog" href="http://geco.constile.org/" title="Geco: il blog associato a .ConStile" />
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../constile.xml" />
<link rel="toc" href="../../mappa.php" title="Mappa di .ConStile" />
<link rel="index" href="../../index.html" title="La pagina principale di .ConStile" />
<link rel="stylesheet" type="text/css" media="screen" href="../../stili_v5/schermo.css" />
<link rel="stylesheet" type="text/css" media="print" href="../../stili_v5/print.css" />
<link media="aural, braille" rel="stylesheet" href="../../stili_v5/aural.css" type="text/css" />
<link media="tty" rel="stylesheet" href="../../stili_v5/tty.css" type="text/css" />
<link rel="shortcut icon" href="../../favicon.ico" />
<!-- wget/1.10.2 (red hat modified) -->
</head>
<body>
<div id="intestazione">
<!-- logo -->
<div id="logo"><a id="logoIMG" href="../../index.html" title=".ConStile, una guida dedicata all'uso dei CSS per lo sviluppo di siti web leggeri, usabili, conformi agli standard W3C"><span class="title">.ConStile, una guida dedicata all'uso dei CSS per lo sviluppo di siti web leggeri, usabili, conformi agli standard W3C</span></a></div>
<div id="issn"><acronym title="International Standard Serial Number">ISSN</acronym> 1722-375X</div>
<div class="nascosto">[<a name="TOP" id="TOP" href="index.html#MENU">Vai al menu di navigazione principale</a>]</div>
<!-- /logo -->
<hr />
<!-- barra di navigazione -->
<div id="navbar" title="Menu di navigazione">
<h2 class="nascosto">Sezioni</h2>
	<ul>
		<li class="nascosto">[<a name="MENU" id="MENU" href="index.html#CONTENUTI">Vai ai contenuti</a>]</li>
		<li ><a href="../../index.html" title="Pagina principale del sito">Homepage</a></li>
		<li ><a href="../../tutorial/index.html" title="Guide e consigli per la realizzazione di siti web tramite i CSS.">Tutorial</a></li>
		<li ><a href="../../clonazioni/index.html" title="Esempi di come con i CSS sia possibile riprodurre il layout di qualsiasi sito.">Clonazioni</a></li>
		<li ><a href="../../template/index.html" title="Template realizzati con i CSS da utilizzare per il proprio sito.">Template</a></li>
		<li ><a href="../../tips/index.html" title="Piccoli suggerimenti per ottenere il massimo dai CSS.">Tips</a></li>
		<li id="voisietequi"><a href="../index.html" title="Come integrare (X)HTML, CSS e JavaScript per aggiungere un po' di sale al proprio sito web.">DHTML</a></li>
		<li ><a href="../../libri/index.html" title="Libri suggeriti per approfondire la conoscenza degli standard W3C, dell'XHTML, dei CSS">Libri</a></li>
	</ul>
</div>
<!-- /barra di navigazione -->
<hr />
<!-- barra di locazione -->
<div id="locazione" title="&quot;Voi siete qui&quot;: Attuale posizione nel sito"><a href="../../index.html" title="Vai alla homepage">Home</a> &gt; <a href="../index.html">DHTML</a> &gt; <a href="index.html">Menu ad albero</a> &gt; Menu ad albero in JS/CSS</div>
<!-- /barra di locazione -->
</div>
<hr />
<div id="bodycontent">
<div class="nascosto">[<a name="CONTENUTI" id="CONTENUTI" href="index.html#PIEDE">Vai al pi&egrave; di pagina</a>]</div>


<div id="principale">

<h1 id="titoloArticolo">Menu ad albero in JS/CSS</h1>

Realizzeremo un menu ad albero sfruttando i CSS e il <acronym title="Document Object Model">DOM</acronym> attraverso il JavaScript. La semplicit&agrave; del CSS e degli script contrastano con l'efficacia del risultato. 
<h2>Il menu in (X)HTML</h2>

<p>Il menu sar&agrave; realizzato tramite liste non ordinate tramite i tag <code>ul</code> e <code>li</code>. E' bene ricordare che per creare una sottolista bisogna annidare il tag <code>ul</code> nel tag <code>li</code> secondo il seguente schema:</p>

<p class="code"><code>&lt;ul&gt;<br />
 &lt;li&gt;<br />
 elemento lista<br />
 &lt;ul&gt;<br />
 &lt;li&gt;elemento sottolista&lt;/li&gt;<br />
 &lt;/ul&gt;<br />
 &lt;/li&gt;<br />
&lt;/ul&gt;</code></p>
<p>Il menu utilizzato nell'<a href="menu_ad_albero.html" title="Pagina di esempio [SI APRE IN UNA NUOVA FINESTRA]" rel="esterno">esempio</a> &egrave; realizzato tramite il seguente codice (X)HTML:</p>

<p class="code"><code>&lt;ul&gt;<br />
&lt;li class=&quot;menu&quot;&gt;&lt;a href=&quot;<strong>javascript:mmenu('submenu-1')</strong>&quot;&gt;Canale 1&lt;/a&gt;<br />
 &lt;ul <strong>class=&quot;submenu&quot;</strong> <strong>id=&quot;submenu-1&quot;</strong>&gt;<br />
 &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Link&lt;/a&gt;&lt;/li&gt;<br />
 &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Link&lt;/a&gt;&lt;/li&gt;<br />
 &lt;/ul&gt;<br />
&lt;/li&gt;<br />
&lt;li class=&quot;menu&quot;&gt;&lt;a href=&quot;<strong>javascript:mmenu('submenu-2')</strong>&quot;&gt;Canale 2&lt;/a&gt;<br />
 &lt;ul <strong>class=&quot;submenu&quot;</strong> <strong>id=&quot;submenu-2&quot;</strong>&gt;<br />
 &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Link&lt;/a&gt;&lt;/li&gt;<br />
 &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Link&lt;/a&gt;&lt;/li&gt;<br />
 &lt;/ul&gt;<br />
&lt;/li&gt;<br />
&lt;li class=&quot;menu&quot;&gt;&lt;a href=&quot;<strong>javascript:mmenu('submenu-3')</strong>&quot;&gt;Canale 3&lt;/a&gt;<br />
 &lt;ul <strong>class=&quot;submenu&quot;</strong> <strong>id=&quot;submenu-3&quot;</strong>&gt;<br />
 &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Link&lt;/a&gt;&lt;/li&gt;<br />
 &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Link&lt;/a&gt;&lt;/li&gt;<br />
 &lt;/ul&gt;<br />
&lt;/li&gt;<br />
&lt;/ul&gt;<br />
</code></p>
<p>Il men&ugrave; &egrave; realizzato con una lista di tre elementi, ognuno dei quali ha una sottolista di due elmenti. Il livello di annidamento delle liste pu&ograve; essere qualsiasi. Si noti come a tutte le liste costituenti i sottomenu &egrave; stata assegnata la classe &quot;submenu&quot; e un identificatore che rappresenti il sottomenu in maniera univoca, ad esempio &quot;submenu-2&quot;.</p>

<h2>Il codice CSS</h2>

<p>Il codice CSS, che per semplicit&agrave; &egrave; stato incluso nel documento tramite il tag <code>style</code>, &egrave; di seguito riportato:</p>

<p class="code"><code>ul {<br />
 list-style: disc url(doc.gif);<br />
 margin:0;padding:0 2em;<br />
}<br />
li.menu { list-style: square url(cartellachiusa.gif); }</code></p>
<p>Le regole applicate al tag <code>ul</code> indicano che il marcatore di lista deve essere un'icona rappresentante una pagina web (file <a href="doc.gif">doc.gif</a>). Agli elementi di una lista che abbiano una sottolista annidata &egrave; stata associata la classe menu: <code>&lt;li class=&quot;menu&quot;&gt;</code> (vedi il codice (X)HTML utilizzato per realizzare il menu). Tali elementi, associati all'identificatore <code>li.menu</code>, hanno come marcatore di lista un'icona rappresentante una cartella chiusa (file <a href="cartellachiusa.gif">cartellachiusa.gif</a>)</p>

<p>Se non intervenisse il codice JavaScript, ovvero qualora il <acronym title="Document Object Model">DOM</acronym> non fosse sufficentemente supportato (ad esempio Opera 6), il menu apparirebbe come mostrato dalla seguente immagine:</p>

<img class="esempio" src="menu_no_js.gif" alt="menu senza JS" title="Menu senza JS" /> 
<h2>Il codice JavaScript</h2>

<p>Il codice JavaScript, anch'esso per semplicit&agrave; incluso nella pagina di <a href="menu_ad_albero.html" title="Pagina di esempio [SI APRE IN UNA NUOVA FINESTRA]" rel="esterno">esempio</a> all'interno del tag <code>head</code>, &egrave; di seguito riportato:</p>

<p class="code"><code><em>/* gestione del menu */</em><br />
function mmenu(ID) {<br />
 var menu = document.getElementById(ID);<br />
 var display = menu.style.display;<br />
 menu.style.display = (display == &quot;block&quot;) ? &quot;none&quot; : &quot;block&quot;;<br />
 menu.parentNode.style.listStyleImage = (display == &quot;block&quot;) ? &quot;url(cartellachiusa.gif)&quot; : &quot;url(cartellaaperta.gif)&quot;;<br />
 }<br />
<br />
<em>/* inizializzazione del menu */</em><br />
window.onload = function() {<br />
 var uls = document.getElementsByTagName(&quot;ul&quot;);<br />
 for (i=0;i&lt;uls.length;i++) {<br />
 if(uls[i].getAttribute(&quot;class&quot;)==&quot;submenu&quot;)uls[i].style.display = &quot;none&quot;;<br />
 if(uls[i].getAttribute(&quot;id&quot;) &amp;&amp; uls[i].getAttribute(&quot;id&quot;).search(&quot;submenu-&quot;)!= -1) uls[i].style.display = &quot;none&quot;;<br />
 }<br />
}</code></p>
<p>Analizziamo il codice cominciando dall'inizializzazione del menu. Quando la pagina viene caricata, nella variabile <code>uls</code> viene memorizzato un array contenente tutti i tag <code>ul</code>. Ogni elemento dell'array viene analizzato per vedere se si tratta di un sottomenu e, in caso affermativo, si imposta la propriet&agrave; display su none tramite l'istruzione <code>uls[i].style.display = &quot;none&quot;</code>. Per contrallere se un elento di <code>uls</code> sia o no un sottomenu &egrave; sufficiente controllare il valore dell'attributo <code>class</code> tramite l'istruzione <code>uls[i].getAttribute(&quot;id&quot;)</code>. Purtroppo sembra che con Internet Explorer (ver. 6.0) tale istruzione restituisca sempre il valore nullo. Avendo assegnato a tutti gli identificatori dei sottomenu il prefisso &quot;<strong>submenu-</strong>&quot; potremmo utilizzare <code>uls[i].getAttribute(&quot;id&quot;).search(&quot;submenu-&quot;)</code> in luogo di <code>uls[i].getAttribute(&quot;id&quot;)</code>. Sembra per&ograve; che tale istruzione non permetta il corretto funzionamento con Mozilla (1.0). La soluzione adottata (vedi codice precedentemente riportato) permette il funzionamento sia con Internet Explorer sia con Mozilla.</p>

<p>La funzione <code>mmenu(mID)</code> si occupa di mostrare o nascondere il settomenu associato all'identificatore <code>mID</code>. Innanzitutto la funzione memorizza nella variabile <code>menu</code> il sottomenu associato all'identificatore <code>mID</code> e ne memorizza lo stato (nascosto o visibile) nella variabile <code>display</code>. Se il sottomenu &egrave; visibile, il menu viene nascosto impostando il valore <code>none</code> per la propriet&agrave; display del sottomenu, altrimenti il menu viene mostrato impostando il valore <code>block</code> per la stessa propriet&agrave;.</p>

<p class="code"><code>menu.style.display = (display == &quot;block&quot;) ? &quot;none&quot; : &quot;block&quot;;</code></p>
<p>Inoltre viene modificata l'immagine utilizzata come marcatore di lista dall'elemento parent (<code>li</code>) del sottomenu corrente, scegliendo l'immagine della cartella chiusa ovvero quella della cartella aperta.</p>

<p class="code"><code>menu.parentNode.style.listStyleImage = (display == &quot;block&quot;) ? &quot;url(cartellachiusa.gif)&quot; : &quot;url(cartellaaperta.gif)&quot;;</code></p>
<p>La funzione <code>mmenu(mID)</code> viene invocata attivando un link:</p>

<p class="code"><code>&lt;li class=&quot;menu&quot;&gt;&lt;a href=&quot;<strong>javascript:mmenu('submenu-1')</strong>&quot;&gt;Canale 1&lt;/a&gt;...&lt;/li&gt;</code></p>
<h2>Implementazione</h2>

<p>L'implementazione del menu &egrave; molto semplice. Innanzitutto bisogna inserire nella pagina i codici CSS e Javascript proposti, meglio se attraverso file esterni.</p>

<p>nel documento (X)HTML &egrave; sufficiente creare una lista con sottoliste. Se un elemento della lista prevede sottoliste bisogna associarlo alla classe &quot;menu&quot; ed aggiungere il link per la gestione del sottomenu: <code>&lt;a href=&quot;javascript:mmenu('submenu-<em>NOME</em>')&quot;&gt;Apri il sottomenu&lt;/a&gt;</code>, dove <code>submenu-NOME</code> &egrave; l'identificatore del sottomenu associato al link:</p>

<p class="code"><code>&lt;li class=&quot;menu&quot;&gt;&lt;a href=&quot;<strong>javascript:mmenu('submenu-1')</strong>&quot;&gt;Canale 1&lt;/a&gt;<br />
 &lt;ul <strong>class=&quot;submenu&quot;</strong> <strong>id=&quot;submenu-1&quot;</strong>&gt;<br />
 [...]<br />
 &lt;/ul&gt;<br />
&lt;/li&gt;</code></p>
<p>Infine bisogna associare i vari sottomenu alla classe &quot;submenu&quot; e assegnare loro l'identificatore &quot;submenu-<em>NOME</em>&quot;.</p><p><a href="../../commenti/index.html?aid=15" title="Collegamento alla pagina dei commenti">Commenti sull'articolo</a></p>
<div id="firma"><em>G.T.</em> -- ultima revisione: 24.11.2002</div>
</div>

<hr />

<div id="secondario">
	<h3>File correlati</h3>
	<ul>
<li><a href="menu_ad_albero.html">Esempio</a></li>
<li><a href="menu_ad_albero.zip" title="Scarica l&acute;articolo in PDF, esempi, ecc. [file zip - 44 KB]">ZIP</a></li>
</ul>	<h3>Articoli correlati:</h3>
	<ul>
  <li><a href="../../template/menu_verticali/index.html">Menu verticali con i CSS</a></li>
		
	</ul>
	<hr />
	<h3>Strumenti</h3>
	<ul>
		<li><a href="../../commenti/index.html?aid=15" title="Collegamento alla pagina dei commenti">Commenti sull'articolo</a></li>
		<li><a href="javascript:self.print()">Stampa l'articolo</a></li>
	</ul>
</div>

<hr />

<!-- footer -->

<div id="footer">




<p><a href="../../css_guida_completa/index.html"><img src="../../css_guida_completa/miniCover.jpg" alt="CSS Guida Completa" /><br />Il mio libro sui CSS</a></p>
<p><a href="http://www.sentieroimpresa.it/csszensentiero.htm" title="CSS Zen Sentiero vuole essere un luogo di sperimentazione e di confronto sul design basato sull'uso dei fogli di stile"><img src="../../images/banner_zen_sentiero_constil.gif" width="160" height="30" alt="CSS Zen Sentiero" /></a></p>

<hr />



<p id="rss" title="Feed RSS">.ConStile &egrave; disponibile anche in <a href="../../constile.xml">XML</a>.</p>



<p id="cc" title="Licenza"><a href="http://creativecommons.org/licenses/by-nd-nc/1.0" rel="esterno" title="Informazioni sulla licenza con cui &egrave; distribuito il materiale pubblicato su .ConStile">Some Rights Reserved</a>. This work is licensed under a <a href="http://creativecommons.org/licenses/by-nd-nc/1.0" rel="esterno" title="Informazioni sulla licenza con cui &egrave; distribuito il materiale pubblicato su .ConStile">Creative Commons License.</a></p>
<hr />



<p class="nascosto"><a accesskey="T" name="PIEDE" id="PIEDE" href="index.html#TOP" title="Torna all'inizio della pagina">Torna all'inizio della pagina</a></p>

<p id="navGenerale" title="Link di navigazione generale"><a href="../../index.html" title="Torna alla homepage di .ConStile">HOMEPAGE</a> / <a href="../../mappa.php" title="Mappa del sito">Mappa</a> / <a href="../../informazioni.php" title="Tutte le informazioni su .ConStile">Informazioni</a> / <a href="../../exit.php" title="I link consigliati per uscire da .ConStile">EXIT (Link)</a></p>





</div>

<!-- /footer -->

<hr />

<!-- no CSS -->

<div id="avviso-non-standard"><img src="../../images/avvisow3c.png" alt="" /></div>

<!-- /no CSS -->

<div id="page-url">l'indirizzo di questa pagina &egrave;: http://www.constile.org/DHTML/menu_ad_albero/index.php</div>

</div><!-- fine bodycontent -->



</body>

</html>


